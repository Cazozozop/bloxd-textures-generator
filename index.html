<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Système Solaire avec Rayons du Soleil</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/controls/OrbitControls.js"></script>
    <script>
        let scene, camera, renderer, sun, planets = [], stars = [], meteorites = [];
        let clock = new THREE.Clock();
        let controls;

        function init() {
            // Créer la scène
            scene = new THREE.Scene();

            // Créer la caméra
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 0, 100);

            // Créer le renderer
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement);

            // Contrôles de caméra (pour tourner et zoomer avec la souris)
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.25;
            controls.screenSpacePanning = false;
            controls.maxDistance = 500;
            controls.minDistance = 10;

            // Créer la lumière de la scène (lumière directionnelle représentant le soleil)
            const light = new THREE.PointLight(0xffffff, 1, 500);
            light.position.set(0, 0, 0);
            scene.add(light);

            // Créer des étoiles de fond
            createStars(300);

            // Créer le soleil avec rayons lumineux
            createSunWithRays();

            // Créer des planètes
            createPlanets(5);

            // Créer des météorites
            createMeteors(5);

            // Créer une supernova
            createSupernova();

            // Ajouter des ombres pour un rendu plus réaliste
            renderer.shadowMap.enabled = true;

            // Lancer l'animation
            animate();
        }

        // Fonction pour créer des étoiles de fond
        function createStars(count) {
            const geometry = new THREE.SphereGeometry(1, 2, 2);
            const material = new THREE.MeshBasicMaterial({ color: 0xffffff });
            for (let i = 0; i < count; i++) {
                const star = new THREE.Mesh(geometry, material);
                star.position.x = Math.random() * 500 - 250;
                star.position.y = Math.random() * 500 - 250;
                star.position.z = Math.random() * 500 - 250;
                stars.push(star);
                scene.add(star);
            }
        }

        // Fonction pour créer le soleil avec des rayons lumineux
        function createSunWithRays() {
            // Créer le soleil
            const sunGeometry = new THREE.SphereGeometry(8, 32, 32);
            const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xffff00, emissive: 0xffff00, emissiveIntensity: 1 });
            sun = new THREE.Mesh(sunGeometry, sunMaterial);
            sun.position.set(0, 0, 0);
            scene.add(sun);

            // Créer les rayons du soleil (en utilisant des cônes)
            const rayMaterial = new THREE.MeshBasicMaterial({
                color: 0xffff00,
                opacity: 0.2,
                transparent: true
            });

            for (let i = 0; i < 12; i++) {
                const coneGeometry = new THREE.ConeGeometry(0.5, 50, 3);
                const cone = new THREE.Mesh(coneGeometry, rayMaterial);
                cone.rotation.x = Math.random() * Math.PI;
                cone.rotation.y = Math.random() * Math.PI;
                cone.rotation.z = Math.random() * Math.PI;
                cone.position.set(0, 0, 0); // Positionner les rayons au centre du soleil
                cone.translateZ(15); // Décaler le rayon à partir du soleil
                scene.add(cone);
            }
        }

        // Fonction pour créer des planètes espacées
        function createPlanets(count) {
            for (let i = 0; i < count; i++) {
                const size = Math.random() * 5 + 2; // Taille aléatoire de la planète
                const geometry = new THREE.SphereGeometry(size, 32, 32);
                const texture = new THREE.TextureLoader().load('https://cdn.pixabay.com/photo/2016/11/21/13/01/earth-1847475_960_720.jpg'); // Texture de la planète
                const material = new THREE.MeshStandardMaterial({
                    map: texture,
                    roughness: 0.6,
                    metalness: 0.3
                });
                const planet = new THREE.Mesh(geometry, material);
                planet.position.set(Math.random() * 150 - 75, Math.random() * 150 - 75, Math.random() * 150 - 75);
                planet.rotation.y = Math.random() * Math.PI;
                planet.castShadow = true;
                planet.receiveShadow = true;
                planets.push(planet);
                scene.add(planet);
            }
        }

        // Fonction pour créer des météorites
        function createMeteors(count) {
            const geometry = new THREE.SphereGeometry(1, 16, 16);
            const material = new THREE.MeshBasicMaterial({ color: 0xff0000 });
            for (let i = 0; i < count; i++) {
                const meteor = new THREE.Mesh(geometry, material);
                meteor.position.set(Math.random() * 300 - 150, Math.random() * 300 - 150, Math.random() * 300 - 150);
                meteorites.push(meteor);
                scene.add(meteor);
            }
        }

        // Fonction pour créer une supernova (simple éclat lumineux)
        function createSupernova() {
            const geometry = new THREE.SphereGeometry(12, 16, 16);
            const material = new THREE.MeshBasicMaterial({ color: 0xff00ff, emissive: 0xff00ff });
            const supernova = new THREE.Mesh(geometry, material);
            supernova.position.set(Math.random() * 500 - 250, Math.random() * 500 - 250, Math.random() * 500 - 250);
            scene.add(supernova);
        }

        // Fonction d'animation
        function animate() {
            requestAnimationFrame(animate);

            // Animer le soleil et les planètes
            sun.rotation.y += 0.002; // Faire tourner le soleil lentement
            planets.forEach(planet => {
                planet.rotation.y += 0.01;
            });

            // Animer les météorites
            meteorites.forEach(meteor => {
                meteor.position.x += Math.random() * 0.1 - 0.05;
                meteor.position.y += Math.random() * 0.1 - 0.05;
                meteor.position.z += Math.random() * 0.1 - 0.05;
            });

            // Animer les étoiles (juste pour l'effet visuel)
            stars.forEach(star => {
                star.rotation.x += 0.0005;
                star.rotation.y += 0.0005;
            });

            // Mise à jour des contrôles de caméra
            controls.update(); // Nécessaire pour activer le contrôle de la caméra avec le glisser-déposer

            // Rendu de la scène
            renderer.render(scene, camera);
        }

        // Initialisation de la scène
        init();

        // Redimensionner le renderer quand la fenêtre est redimensionnée
        window.addEventListener('resize', () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
        });
    </script>
</body>
</html>
